<% include('../layouts/header.ejs') %>
<link rel="stylesheet" type="text/css" href="/adminEditUser.css">

<% include('../layouts/center.ejs') %>
<div class="center-container">
    <div class="edit-user-container">
        <h1>Edit User</h1>
        <form action="" method="post">
            <input type="text" name="name" id="name" placeholder="Enter Name" onsubmit="return validateForm()" value="<%= user.name %>" required>
            <span id="nameError" class="error"></span>
            
            <input type="email" name="email" id="email" placeholder="Enter Email" value="<%= user.email %>" required>
            <span id="emailError" class="error"></span>
            
            <input type="text" name="mno" id="mno" placeholder="Enter Mobile number" value="<%= user.mobile %>" required>
            <span id="mobileError" class="error"></span>
            
            <input type="hidden" name="id" value="<%= user._id %>">
            
            <input type="submit" value="Update User">
            
        </form>


        <a href="/admin/dashboard">Go Dashboard</a>
    </div>
</div>

<script>
    function validateForm(){
       
       var name=document.getElementById('name').value
       var email=document.getElementById('email').value
       var mobile=document.getElementById('mno').value
  
  
       const nameRegex =/^[a-zA-Z][a-zA-Z0-9]*$/
    if (!nameRegex.test(name)) {
       document.getElementById('nameError').innerHTML='Name should start with alphabet '
       return false
    }else{
        document.getElementById('nameError').innerHTML=''
    }
    const emailRegex = /^[a-zA-Z0-9._%+-]+@['gmail']+\.[a-zA-Z]{2,}$/;

    if (!emailRegex.test(email)){
        document.getElementById('emailError').innerHTML='  Please enter a valid Email address'
        return false
    }else{
        document.getElementById('emailError').innerHTML=''
    }
      
    
      const mobileRegex=/^\d+$/
      if(!mobileRegex.test(mobile)){
          document.getElementById('mobileError').innerHTML='Mobile number should contain only numbers'
          return false
      }else{
          document.getElementById('mobileError').innerHTML=''
      }
  
  
  
       return true
      }
</script>



<% include('../layouts/footer.ejs') %>
